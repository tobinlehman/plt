!function(a){a(document).ready(function(){a(".fa-video-player").fa_video({onLoad:function(){d(this)}}),g(),f(),e(),b(),c()});var b=function(){a(document).on("click","#fa-remove-slide-image",function(b){b.preventDefault();var c={action:faEditSlide.remove_image_action,post_id:a("#post_ID").val()};c[faEditSlide.remove_image_nonce.name]=faEditSlide.remove_image_nonce.nonce,a.ajax({url:ajaxurl,data:c,dataType:"json",type:"POST",success:function(b){return b.success?void a("#fa-selected-images").empty().append(b.data):void 0},error:function(){}})})},c=function(){a(document).on("click","#fa-link-post",function(){a(this).is(":checked")?a("#fa-custom-link-option").hide():a("#fa-custom-link-option").show()})},d=function(b){var c=a("#fapro-update-player"),d=a(".fa-video-player").data();a(c).click(function(c){if(c.preventDefault(),"vimeo"==d.source){var e=a("#fa-title").is(":checked")?1:0,f=a("#fa-byline").is(":checked")?1:0,g=a("#fa-portrait").is(":checked")?1:0,h=a("#fa-color").val().replace("#","");a(b).data("title",e),a(b).data("byline",f),a(b).data("portrait",g),a(b).data("color",h),a(b).empty(),a(b).fa_video()}if("youtube"==d.source){var i=a("#fa-controls").is(":checked")?1:0,j=a("#fa-autohide").is(":checked")?1:0,k=a("#fa-annotations").is(":checked")?3:1,l=a("#fa-modestbranding").is(":checked")?1:0;a(b).data("controls",i),a(b).data("autohide",j),a(b).data("iv_load_policy",k),a(b).data("modestbranding",l),a(b).empty(),a(b).fa_video()}})},e=function(){a(document).on("change",".fa_video_aspect_ratio",function(){var b=a(this).parents(".fa-player-aspect-options"),c=a(b).find(".fa_video_width"),d=a(b).find(".fa_video_height"),e=a(this).val(),f=Math.round(parseInt(a(c).val())),g=0;switch(e){case"4x3":g=Math.floor(3*f/4);break;case"16x9":g=Math.floor(9*f/16);break;case"2.35x1":g=Math.floor(f/2.35)}a(d).html(g)}),a(document).on("keyup",".fa_video_width",function(){var b=a(this).parents(".fa-player-aspect-options"),c=a(b).find(".fa_video_aspect_ratio");if(""!=a(this).val()){var d=Math.round(parseInt(a(this).val()));a(this).val(d),a(c).trigger("change")}})},f=function(){var b=faEditSlide.messages,c=!1;a("#fa-remove-video").click(function(d){if(d.preventDefault,c)return void h(b.querying_video,"fa-loading");c=!0,h(b.removing_video,"fa-loading");var e={action:faEditSlide.remove_video_ajax_action,post_id:a("#post_ID").val()};e[faEditSlide.remove_video_nonce.name]=faEditSlide.remove_video_nonce.nonce,a.ajax({url:ajaxurl,data:e,dataType:"json",type:"POST",success:function(b){return c=!1,i(),b.success?(a("#fa-video-settings").empty(),a("#fa-video-query-container").empty().html(b.data.video_query),void g()):void h(b.data,"fa-error")},error:function(){c=!1,h(b.query_error,"fa-error")}})})},g=function(){var b=faEditSlide.id_prefix,c=a("#"+b+"-slide-video-query"),e=a("#fa-video-query-btn"),g=a(c).find("input[name=fa_video_id]"),j=faEditSlide.messages,k=!1;a(e).click(function(c){if(c.preventDefault(),k)return void h(j.querying_video,"fa-loading");var e=a("#"+b+"-slide-video-query input[name=fa_video_source]:checked").val()||a("#fa_video_source").val(),l=a(g).val();if(i(),""==e||""==l)return void h(j.empty_video_query,"fa-error");k=!0,h(j.loading_video,"fa-loading");var m={action:faEditSlide.ajax_action,video_source:e,video_id:l,post_id:a("#post_ID").val(),set_thumbnail:a("#fa_set_image").is(":checked")?1:0,set_slide_img:a("#fa_set_slide_image").is(":checked")?1:0,set_video:a("#fa_set_video").is(":checked")?1:0};m[faEditSlide.wp_nonce.name]=faEditSlide.wp_nonce.nonce,a.ajax({url:ajaxurl,data:m,dataType:"json",type:"POST",success:function(b){if(k=!1,i(),!b.success)return void h(b.data,"fa-error");if(a("#fa_set_title").is(":checked")){var c=a("#fa-custom-title");c.length>0?a(c).val(b.data.video.title):(a("#title-prompt-text").addClass("screen-reader-text"),a("#title[type=text]").val(b.data.video.title))}if(a("#fa_set_content").is(":checked")){var e=a("#fa-custom-content-post");e.length>0?(fa_clear_editor("fa-custom-content-post"),b.data.video.description&&send_to_fa_custom_editor(b.data.video.description)):(fa_clear_editor(),b.data.video.description&&window.send_to_editor(b.data.video.description))}a("#fa_set_image").is(":checked")&&b.data.thumbnail&&WPSetThumbnailHTML(b.data.thumbnail),a("#fa_set_slide_image").is(":checked")&&b.data.slide_img&&a("#fa-selected-images").empty().append(b.data.slide_img),a("#fa_set_video").is(":checked")&&(b.data.video_settings&&(a("#fa-video-settings").empty().html(b.data.video_settings),a(".fa-video-player").fa_video({onLoad:function(){d(this)}})),b.data.video_query&&a("#fa-video-query-container").empty().html(b.data.video_query),f())},error:function(){k=!1,h(j.query_error,"fa-error")}})})},h=function(b,c){a("#fa-video-query-messages").empty().attr({"class":c+" has-message"}).html(b)},i=function(){a("#fa-video-query-messages").empty().removeAttr("class")}}(jQuery);var fa_clear_editor=function(a){var b,c="undefined"!=typeof tinymce,d="undefined"!=typeof QTags;if(wpActiveEditor)c&&(b=tinymce.get(a||wpActiveEditor));else if(c&&tinymce.activeEditor)b=tinymce.activeEditor,wpActiveEditor=b.id;else if(!d)return!1;b&&!b.isHidden()?b.execCommand("mceSetContent",!1,""):document.getElementById(a||wpActiveEditor).value=""},fa_custom_editor,send_to_fa_custom_editor;send_to_fa_custom_editor=function(a){var b,c="undefined"!=typeof tinymce,d="undefined"!=typeof QTags;if(fa_custom_editor)c&&(b=tinymce.get(wpActiveEditor));else if(c&&tinymce.activeEditor)fa_custom_editor="fa-custom-content-post",b=tinymce.get(fa_custom_editor);else if(!d)return!1;b&&!b.isHidden()?b.execCommand("mceInsertContent",!1,a):d?QTags.insertContent(a):document.getElementById(fa_custom_editor).value=a};