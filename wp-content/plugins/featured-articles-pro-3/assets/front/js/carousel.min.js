!function(a){a.fn.CFCarousel=function(b){if(this.length>1)return this.each(function(){a(this).CFCarousel(b)}),this;if(!(this.length<1)){var c={visibleItems:5,navs:{back:".nav-back",fwd:".nav-fwd"},cycle:!0,opacityIdle:.7,opacityOn:1,opacityOver:.8,animateNavs:!0,threshold:0,init:function(){},change:function(){},navClick:function(){}},b=a.extend({},c,b),d=this,e=a(this).find(".fa_carousel_inside"),f=a(this).find(".fa_carousel_items"),g=a(this).find(".item"),h=g.length,i=0,j=0;0==b.visibleItems&&(b.visibleItems=5),b.visibleItems>=h&&(b.visibleItems=h);var k=b.visibleItems;itemWidth=a(g[0]).outerWidth(),current=0;var l=function(c){return m(c),c&&(a.each(g,function(c){current==c?a(this).addClass("active").css({opacity:b.opacityOn}):a(this).css({opacity:b.opacityIdle});var d=a(this).position();a(this).data("pos",d)}),a(g).click(function(b){b.stopPropagation();var c=a.inArray(this,g);o(c)}).mouseenter(function(){a(this).hasClass("active")||a(this).stop().animate({opacity:b.opacityOver},{queue:!1,duration:200})}).mouseleave(function(){a(this).hasClass("active")||a(this).stop().animate({opacity:b.opacityIdle},{queue:!1,duration:200})}),q(),a(window).resize(function(){n()}),b.init.call(d,{})),this},m=function(b){n(b),i=k*itemWidth,a(d).css({width:i}),a(e).css({width:i}),j=Math.ceil(k/2.0001)-(0==k?0:1)},n=function(c){var e=a(d).parent().outerWidth();if(0==i&&(i=k*itemWidth),a(d).css({display:"block"}),i+b.threshold>e){for(var f=k-1,g=f*itemWidth,h=f;h>=1;h--){if(g+b.threshold<e||1==h){k=h,i=g;break}g-=itemWidth}if(0==g)return void a(d).css({display:"none"});m(),c||o(current,!0)}else if(i+b.threshold<e&&k<b.visibleItems){if(e-i<itemWidth)return;var j=Math.floor((e-(i+b.threshold))/itemWidth);if(1>j)return;k+=j,k>b.visibleItems&&(k=b.visibleItems),i=k*itemWidth,m(),o(current,!0)}},o=function(c,e){if(current!=c||e){var i=2==k&&c<current?1:j,l=0>c-i?0:c-i,m=h-k;l>m&&(l=m);var n=a(g[l]).data("pos");a(f).stop().animate({"margin-left":-n.left},{queue:!1,duration:300}),current=c,a(g).removeClass("active").css({opacity:b.opacityIdle}),a(g[current]).addClass("active").css({opacity:b.opacityOn}),p(),b.change.call(d,{index:c})}},p=function(){if(!b.cycle){var c=a(d).find(b.navs.back),e=a(d).find(b.navs.fwd);a(c).removeClass("end"),a(e).removeClass("end"),0==current?a(c).addClass("end"):current==h-1&&a(e).addClass("end")}},q=function(){var c=a(d).find(b.navs.back),e=a(d).find(b.navs.fwd);b.cycle||(0==current?a(c).addClass("end"):current==h-1&&a(e).addClass("end")),a(c).click(function(c){c.preventDefault();var f=b.cycle?h-1:0,g=current-1<0?f:current-1;b.cycle||(0==g?a(this).addClass("end"):a(this).removeClass("end"),a(e).removeClass("end")),o(g),b.navClick.call(d,{index:g,direction:-1})}),a(e).click(function(e){e.preventDefault();var f=b.cycle?0:h-1;index=current+1>h-1?f:current+1,b.cycle||(index==h-1?a(this).addClass("end"):a(this).removeClass("end"),a(c).removeClass("end")),o(index),b.navClick.call(d,{index:index,direction:1})}),b.animateNavs&&(a(c).css({opacity:0,left:-50}),a(e).css({opacity:0,right:-50}),a(d).mouseenter(function(){a(c).stop().animate({opacity:1,left:-15},{queue:!1,duration:200}),a(e).stop().animate({opacity:1,right:-15},{queue:!1,duration:200})}).mouseleave(function(){a(c).stop().animate({opacity:0,left:-50},{queue:!1,duration:200}),a(e).stop().animate({opacity:0,right:-50},{queue:!1,duration:200})}))};return this.gotoIndex=function(a){o(a)},l(!0)}}}(jQuery);