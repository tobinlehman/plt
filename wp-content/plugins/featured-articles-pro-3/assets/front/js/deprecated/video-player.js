(function(A){A.fn.FA_VideoPlayer=function(P){if(0==this.length){return false}if(this.length>1){this.each(function(Q,R){A(R).FA_VideoPlayer(P)})}var H={width:500,height:375,protocol:"https:",stateChange:function(){}};var O=this,P=A.extend({},H,P),G=false,J=false,M=false,L=false,F=false;var I=function(){L=A(O).data();var Q=E();J=Q.cid;G=Q.pid;A(O).attr("id",J).empty().append('<div id="'+G+'"></div>');P=N(L.source);if(!P){return}P.protocol="https:";P.uiDialog=false;C();B();A(window).resize(function(){B()});return O};var B=function(){var R=A("#"+J).width(),Q;switch(P.aspect){case"16x9":default:Q=(R*9)/16;break;case"4x3":Q=(R*3)/4;break}A("#"+J).css({height:Math.floor(Q)})};var D=function(R){var S={play:0,volume:30,fullscreen:1,loop:0,autoplay:0};var U={enablejsapi:1,modestbranding:1,autohide:0,controls:1,rel:0,showinfo:0,showsearch:0,playerapiid:G};var T={api:1,title:0,byline:0,portrait:0,color:"",player_id:G,clip_id:L.video_id};var Q;switch(R){case"youtube":Q=A.extend(S,U);break;case"vimeo":Q=A.extend(S,T);break}return Q};var N=function(Q){var R;switch(Q){case"youtube":R=A.extend({},P,D("youtube"),L);R.fs=R.fullscreen;break;case"vimeo":R=A.extend({},P,D("vimeo"),L);R.color=L.color.replace("#","");break}return R};var E=function(){var T="FA_videoPlayerContainer_",R="FAVideoPlayer",S=Math.floor(Math.random()*1000),Q={};Q.cid=T+S;Q.pid=R+S;return Q};var C=function(){if(P.source=="youtube"){if(!this.yt_api_loaded){A.getScript(P.protocol+"//www.youtube.com/player_api");this.yt_api_loaded=true}if(!YT_API_LOADED){O.yt_interval=setInterval(function(){O.loadYTplayer()},500);return}else{O.loadYTplayer()}}if(P.source=="vimeo"){O.loadVimeoPlayer()}};this.loadVimeoPlayer=function(Q){var R=A.extend(P,Q);R.ref=false;var S='<iframe style="visibility:visible;" id="'+G+'" src="'+P.protocol+"//player.vimeo.com/video/"+P.video_id+"?"+A.param(R)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';A("#"+J).empty().append(S);O.isHTML5=true};this.loadYTplayer=function(Q){if(!YT_API_LOADED){return}if(O.yt_interval){clearInterval(O.yt_interval);O.yt_interval=false}var R=A.extend(P,Q);R.ref=false;if(Q){A("#"+J).empty().append('<div id="'+G+'"></div>')}new YT.Player(G,{height:"100%",width:"100%",videoId:P.video_id,playerVars:R,events:{onReady:function(S){M=S.target;M.setVolume(P.volume);O.updateStatus(1)},onStateChange:function(S){var T=S.data;switch(T){case 0:O.updateStatus(4);break;case 1:O.updateStatus(2);break;case 2:O.updateStatus(3);break}}}})};var K=function(V){if(!F){setTimeout(function(){K(V)},100);return}var R={vimeo:{play:"api_play",pause:"api_pause",stop:"api_stop",volume:"api_setVolume",volumeDivider:100},youtube:{play:"playVideo",pause:"pauseVideo",stop:"stopVideo",volume:"setVolume",volumeDivider:1}};F=1;var Q=R[L.source];if(!M){M=document.getElementById(G);var U=Q.volume,T=(L.volume||10)/R[L.source]["volumeDivider"];if(P.source=="vimeo"&&O.isHTML5){FA_post_action(U.replace("api_",""),T,G)}else{M[U](T)}}if("load"==V){return}var S=Q[V];if(P.source=="vimeo"&&O.isHTML5){FA_post_action(S.replace("api_",""),"",G)}else{M[S]()}switch(V){case"play":F=2;break;case"pause":F=3;break;case"stop":F=4;break}P.stateChange.call(O,F)};this.play=function(){K("play")};this.pause=function(){K("pause")};this.stop=function(){K("stop")};this.getData=function(){return L};this.getStatus=function(){return F};this.updateStatus=function(Q){F=Q;P.stateChange.call(O,Q)};this.resizePlayer=B;A(this).data("ref",this);return I()}})(jQuery);var YT_API_LOADED=false;(function(A){A(document).ready(function(){var B=false;if(typeof window.onYouTubePlayerAPIReady!=="undefined"){B=window.onYouTubePlayerAPIReady}window.onYouTubePlayerAPIReady=function(){YT_API_LOADED=true;if(B){B()}}})})(jQuery);if(window.addEventListener){window.addEventListener("message",FA_receiveMessage,false)}else{window.attachEvent("onmessage",FA_receiveMessage,false)}function FA_receiveMessage(D){var C=jQuery.parseJSON(D.data),A=C.player_id;switch(C.event){case"ready":var B=jQuery(A.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(B).data("ref").updateStatus(1);FA_post_action("addEventListener","pause",A);FA_post_action("addEventListener","finish",A);FA_post_action("addEventListener","play",A);break;case"play":var B=jQuery(A.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(B).data("ref").updateStatus(2);break;case"pause":var B=jQuery(A.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(B).data("ref").updateStatus(3);break;case"finish":var B=jQuery(A.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(B).data("ref").updateStatus(4);break}}function FA_post_action(E,D,A){var C={method:E};if(D){C.value=D}var B=jQuery("#"+A)[0];B.contentWindow.postMessage(JSON.stringify(C),jQuery(B).attr("src").split("?")[0])};