function FA_receiveMessage(a){var b=jQuery.parseJSON(a.data),c=b.player_id;if("undefined"!=typeof c)switch(b.event){case"ready":var d=jQuery(c.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(d).data("ref").updateStatus(1),FA_post_action("addEventListener","pause",c),FA_post_action("addEventListener","finish",c),FA_post_action("addEventListener","play",c);break;case"play":var d=jQuery(c.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(d).data("ref").updateStatus(2);break;case"pause":var d=jQuery(c.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(d).data("ref").updateStatus(3);break;case"finish":var d=jQuery(c.replace("FAVideoPlayer","#FA_videoPlayerContainer_"));jQuery(d).data("ref").updateStatus(4)}}function FA_post_action(a,b,c){var d={method:a};b&&(d.value=b);var e=jQuery("#"+c)[0];e.contentWindow.postMessage(JSON.stringify(d),jQuery(e).attr("src").split("?")[0])}!function(a){a.fn.FA_VideoPlayer=function(b){if(0==this.length)return!1;this.length>1&&this.each(function(c,d){a(d).FA_VideoPlayer(b)});var c={width:500,height:375,protocol:"https:",stateChange:function(){}},d=this,b=a.extend({},c,b),e=!1,f=!1,g=!1,h=!1,i=!1,j=function(){h=a(d).data();var c=n();return f=c.cid,e=c.pid,a(d).attr("id",f).empty().append('<div id="'+e+'"></div>'),(b=m(h.source))?(b.protocol="https:",b.uiDialog=!1,o(),k(),a(window).resize(function(){k()}),d):void 0},k=function(){var c,d=a("#"+f).width();switch(b.aspect){case"16x9":default:c=9*d/16;break;case"4x3":c=3*d/4}a("#"+f).css({height:Math.floor(c)})},l=function(b){var c,d={play:0,volume:30,fullscreen:1,loop:0,autoplay:0},f={enablejsapi:1,modestbranding:1,autohide:0,controls:1,rel:0,showinfo:0,showsearch:0,playerapiid:e},g={api:1,title:0,byline:0,portrait:0,color:"",player_id:e,clip_id:h.video_id};switch(b){case"youtube":c=a.extend(d,f);break;case"vimeo":c=a.extend(d,g)}return c},m=function(c){var d;switch(c){case"youtube":d=a.extend({},b,l("youtube"),h),d.fs=d.fullscreen;break;case"vimeo":d=a.extend({},b,l("vimeo"),h),d.color=h.color.replace("#","")}return d},n=function(){var a="FA_videoPlayerContainer_",b="FAVideoPlayer",c=Math.floor(1e3*Math.random()),d={};return d.cid=a+c,d.pid=b+c,d},o=function(){if("youtube"==b.source){if(this.yt_api_loaded||(a.getScript(b.protocol+"//www.youtube.com/player_api"),this.yt_api_loaded=!0),!YT_API_LOADED)return void(d.yt_interval=setInterval(function(){d.loadYTplayer()},500));d.loadYTplayer()}"vimeo"==b.source&&d.loadVimeoPlayer()};this.loadVimeoPlayer=function(c){var g=a.extend(b,c);g.ref=!1;var h='<iframe style="visibility:visible;" id="'+e+'" src="'+b.protocol+"//player.vimeo.com/video/"+b.video_id+"?"+a.param(g)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';a("#"+f).empty().append(h),d.isHTML5=!0},this.loadYTplayer=function(c){if(YT_API_LOADED){d.yt_interval&&(clearInterval(d.yt_interval),d.yt_interval=!1);var h=a.extend(b,c);h.ref=!1,c&&a("#"+f).empty().append('<div id="'+e+'"></div>'),new YT.Player(e,{height:"100%",width:"100%",videoId:b.video_id,playerVars:h,events:{onReady:function(a){g=a.target,g.setVolume(b.volume),d.updateStatus(1)},onStateChange:function(a){var b=a.data;switch(b){case 0:d.updateStatus(4);break;case 1:d.updateStatus(2);break;case 2:d.updateStatus(3)}}}})}};var p=function(a){if(!i)return void setTimeout(function(){p(a)},100);var c={vimeo:{play:"api_play",pause:"api_pause",stop:"api_stop",volume:"api_setVolume",volumeDivider:100},youtube:{play:"playVideo",pause:"pauseVideo",stop:"stopVideo",volume:"setVolume",volumeDivider:1}};i=1;var f=c[h.source];if(!g){g=document.getElementById(e);var j=f.volume,k=(h.volume||10)/c[h.source].volumeDivider;"vimeo"==b.source&&d.isHTML5?FA_post_action(j.replace("api_",""),k,e):g[j](k)}if("load"!=a){var l=f[a];switch("vimeo"==b.source&&d.isHTML5?FA_post_action(l.replace("api_",""),"",e):g[l](),a){case"play":i=2;break;case"pause":i=3;break;case"stop":i=4}b.stateChange.call(d,i)}};return this.play=function(){p("play")},this.pause=function(){p("pause")},this.stop=function(){p("stop")},this.getData=function(){return h},this.getStatus=function(){return i},this.updateStatus=function(a){i=a,b.stateChange.call(d,a)},this.resizePlayer=k,a(this).data("ref",this),j()}}(jQuery);var YT_API_LOADED=!1;!function(a){a(document).ready(function(){var a=!1;"undefined"!=typeof window.onYouTubePlayerAPIReady&&(a=window.onYouTubePlayerAPIReady),window.onYouTubePlayerAPIReady=function(){YT_API_LOADED=!0,a&&a()}})}(jQuery),window.addEventListener?window.addEventListener("message",FA_receiveMessage,!1):window.attachEvent("onmessage",FA_receiveMessage,!1);